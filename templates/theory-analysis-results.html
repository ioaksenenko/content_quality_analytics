{% extends "base.html" %}
{% load staticfiles %}
{% load filters %}
{% block head %}
	{{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% static "css/base.css" %}" />
	<link rel="stylesheet" type="text/css" href="{% static "css/theory-analysis-results.css" %}" />
    <script src="{% static "js/base.js" %}"></script>
    <script src="{% static "js/theory-analysis-results.js" %}"></script>
{% endblock %}
{% block main %}
<div class="container-fluid mt-3 mb-3">
    {% if modules and modules|length > 0 %}
	    <div class="row">
	    	<div class="col">
                <ul class="nav nav-tabs" id="modules-tabs" role="tablist">
                    {% if modules %}
                        {% for name, content, result in modules %}
                            <li class="nav-item">
                                <a class="nav-link {% if forloop.counter == 1 %} active {% endif %}" id="{{ name }}-tab" data-toggle="tab" href="#tab-{{ name }}" role="tab" aria-controls="tab-{{ name }}" aria-selected="{% if forloop.counter == 1 %} true {% else %} false {% endif %}">{{ content }}</a>
                            </li>
                        {% endfor %}
                    {% endif %}
                </ul>
                <div class="tab-content" id="modules-tabs-content">
                    {% if modules %}
                        {% for name, content, result in modules %}
                            <div class="tab-pane fade {% if forloop.counter == 1 %} show active {% endif %}" id="tab-{{ name }}" role="tabpanel" aria-labelledby="{{ name }}-tab">
                                <div class="container">
                                    {% if 'information_richness' in indicators or 'abstractness' in indicators or 'readability' in indicators or 'water_content' in indicators or 'keyword_density' in indicators %}
                                        <div class="row mb-3">
                                            <div class="col">
                                                <h1>Оценка качества текста</h1>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'information_richness' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Информационная насыщенность</p>
                                            </div>
                                            <div class="col">
                                                <div class="progress">
                                                    <div class="progress-bar {% if result.txt_ch.inf_saturation < 30 %} bg-danger {% elif result.txt_ch.inf_saturation < 60 %} bg-warning {% else %} bg-success {% endif %}" role="progressbar" style="width: {{ result.txt_ch.inf_saturation }}%" aria-valuenow="{{ result.txt_ch.inf_saturation }}" aria-valuemin="0" aria-valuemax="100">{{ result.txt_ch.inf_saturation }}%</div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'abstractness' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Абстрактность</p>
                                            </div>
                                            <div class="col">
                                                <div class="progress">
                                                    <div class="progress-bar {% if result.txt_ch.abstractness >= 21 %} bg-danger {% elif result.txt_ch.abstractness < 21 and result.txt_ch.abstractness >= 16 %} bg-warning {% else %} bg-success {% endif %}" role="progressbar" style="width: {{ result.txt_ch.abstractness }}%" aria-valuenow="{{ result.txt_ch.abstractness }}" aria-valuemin="0" aria-valuemax="100">{{ result.txt_ch.abstractness }}%</div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'readability' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Удобочитаемость</p>
                                            </div>
                                            <div class="col">
                                                <div class="progress">
                                                    <div class="progress-bar {% if result.txt_ch.ganning_index >= 17 %} bg-danger {% elif result.txt_ch.ganning_index < 17 and result.txt_ch.ganning_index >= 13 %} bg-warning {% else %} bg-success {% endif %}" role="progressbar" style="width: {{ result.txt_ch.ganning_index }}%" aria-valuenow="{{ result.txt_ch.ganning_index }}" aria-valuemin="0" aria-valuemax="100">{{ result.txt_ch.ganning_index }}%</div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'water_content' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Водность</p>
                                            </div>
                                            <div class="col">
                                                <div class="progress">
                                                    <div class="progress-bar {% if result.txt_ch.wateriness >= 60 %} bg-danger {% elif result.txt_ch.wateriness < 60 and result.txt_ch.wateriness >= 31 %} bg-warning {% else %} bg-success {% endif %}" role="progressbar" style="width: {{ result.txt_ch.wateriness }}%" aria-valuenow="{{ result.txt_ch.wateriness }}" aria-valuemin="0" aria-valuemax="100">{{ result.txt_ch.wateriness }}%</div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'keyword_density' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Плотность ключевых слов</p>
                                            </div>
                                            <div class="col">
                                                <div class="progress">
                                                    <div class="progress-bar {% if result.txt_ch.density >= 14 %} bg-danger {% elif result.txt_ch.density < 14 and result.txt_ch.density >= 7 %} bg-warning {% else %} bg-success {% endif %}" role="progressbar" style="width: {{ result.txt_ch.density }}%" aria-valuenow="{{ result.txt_ch.density }}" aria-valuemin="0" aria-valuemax="100">{{ result.txt_ch.density }}%</div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_background_color' in indicators or 'creolization_italics' in indicators or 'creolization_bold' in indicators or 'creolization_underline' in indicators or 'creolization_border' in indicators or 'creolization_pictogram' in indicators or 'creolization_link' in indicators %}
                                        <div class="row mb-3">
                                            <div class="col">
                                                <h1>Оценка крeoлизации текста</h1>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_background_color' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений цветом фона:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:0 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:0 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_italics' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений курсивом:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:1 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:1 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_bold' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений жирным шрифтом:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:2 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:2 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_underline' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений подчёркиванием:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:3 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:3 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_border' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений рамкой:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:4 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:4 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_pictogram' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений пиктограммой:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:5 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:5 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_link' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество выделений ссылкой:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_vector|index:6 }} {% if result.txt_ch.creole_txt_uni_distr %}(Равномерность распределения: {{ result.txt_ch.creole_txt_uni_distr|index:6 }}){% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'creolization_background_color' in indicators or 'creolization_italics' in indicators or 'creolization_bold' in indicators or 'creolization_underline' in indicators or 'creolization_border' in indicators or 'creolization_pictogram' in indicators or 'creolization_link' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Степень креолизации текста:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.txt_ch.creolization_degree }}%</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'illustrations_number' in indicators or 'average_illustrations_number_per_page' in indicators or 'image_brightness' in indicators or 'relative_image_brightness' in indicators or 'image_contrast' in indicators or 'relative_image_contrast' in indicators %}
                                        <div class="row mb-3">
                                            <div class="col">
                                                <h1>Оценка качества иллюстраций</h1>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'illustrations_number' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество иллюстраций: </p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.img_ch.img_number }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'average_illustrations_number_per_page' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Среднее число иллюстраций на странице: </p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.img_ch.aver_img_in_pg_num }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'image_brightness' in indicators or 'relative_image_brightness' in indicators or 'image_contrast' in indicators or 'relative_image_contrast' in indicators %}
                                        {% for image in result.img_ch.images %}
                                            <div class="row mb-3">
                                                <div class="col">
                                                    <img src="{{ image.img_path }}" alt="" class="img-thumbnail">
                                                </div>
                                                <div class="col">
                                                    {% if 'image_brightness' in indicators %}
                                                        <div class="row">
                                                            <div class="col">
                                                                <p>Яркость изображения: {{ image.brightness }}</p>
                                                            </div>
                                                        </div>
                                                    {% endif %}
                                                    {% if 'relative_image_brightness' in indicators %}
                                                        <div class="row">
                                                            <div class="col">
                                                                <p>Относительная яркость изображения: {{ image.rel_brightness }}</p>
                                                            </div>
                                                        </div>
                                                    {% endif %}
                                                    {% if 'image_contrast' in indicators %}
                                                        <div class="row">
                                                            <div class="col">
                                                                <p>Контраст изображения: {{ image.contrast }}</p>
                                                            </div>
                                                        </div>
                                                    {% endif %}
                                                    {% if 'relative_image_contrast' in indicators %}
                                                        <div class="row">
                                                            <div class="col">
                                                                <p>Относительный контраст изображения: {{ image.rel_contrast }}</p>
                                                            </div>
                                                        </div>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                    {% if 'has_glossary' in indicators or 'has_subject_index' in indicators or 'has_name_index' in indicators or 'has_geographical_index' in indicators or 'has_chronological_index' in indicators or 'has_illustrations_list' in indicators or 'has_tables_list' in indicators or 'has_abbreviations_list' in indicators or 'has_links' in indicators or 'has_formula' in indicators or 'has_bibliography' in indicators or 'has_conventions_list' in indicators %}
                                        <div class="row mb-3">
                                            <div class="col">
                                                <h1>Наличие справочной информации</h1>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_glossary' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Глоссарий:</p>
                                            </div>
                                            <div class="col">
                                                <p>{% if result.san_ch.glossary == 1 %} есть {% else %} нет {% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_tables_list' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество ссылок на таблицы:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.san_ch.tables }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_illustrations_list' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество ссылок на изображения:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.san_ch.images }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_links' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество ссылок на источники литературы:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.san_ch.literature }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_formula' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Количество ссылок на формулы:</p>
                                            </div>
                                            <div class="col">
                                                <p>{{ result.san_ch.formula }}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% if 'has_bibliography' in indicators %}
                                        <div class="row">
                                            <div class="col">
                                                <p>Список литературы:</p>
                                            </div>
                                            <div class="col">
                                                <p>{% if result.san_ch.litlist == 1 %} есть {% else %} нет {% endif %}</p>
                                            </div>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    {% endif %}
                </div>
	    	</div>
	    </div>
    {% else %}
        <div class="row">
            <div class="col">
                <div class="alert alert-danger" role="alert">
                    Нe выбрано ни одного модуля с теорией.
                </div>
            </div>
        </div>
    {% endif %}
    <div class="row">
        <div class="col">
            <form action="{% url 'self-test-analysis' %}" enctype="multipart/form-data" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary mb-3 mx-auto d-block" id="doexpans">Перейти к анализу материала для самопроверки</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}